diff --git a/src/main.ts b/src/main.ts
index abc..def 100644
--- a/src/main.ts
+++ b/src/main.ts
@@ -22,6 +22,7 @@ import { makeAnthropicDriver } from "./drivers/anthropic.js";
 import { SimpleMemory } from "./memory/simple-memory.js";
 import { AdvancedMemory } from "./memory/advanced-memory.js";
 import { VirtualMemory } from "./memory/virtual-memory.js";
+import { FragmentationMemory } from "./memory/fragmentation-memory.js";
 import { McpManager } from "./mcp/index.js";
 import { newSessionId, findLatestSession, loadSession, ensureGroDir } from "./session.js";
 import { groError, asError, isGroError, errorLogFields } from "./errors.js";
@@ -844,6 +845,39 @@ async function main() {
     let roundImportance: number | undefined = undefined;
     let thinkingSeenThisTurn = false;
 
+    // Memory hot-swap handler
+    const swapMemory = async (targetType: string): Promise<void> => {
+      const validTypes = ["simple", "advanced", "virtual", "fragmentation"];
+      if (!validTypes.includes(targetType)) {
+        Logger.error(`Stream marker: memory('${targetType}') REJECTED — valid types: ${validTypes.join(", ")}`);
+        return;
+      }
+
+      Logger.info(`Stream marker: memory('${targetType}') — swapping memory implementation`);
+      
+      // Extract current messages to transfer to new memory
+      const currentMessages = memory.messages();
+      
+      // Create new memory instance based on type
+      let newMemory: AgentMemory;
+      if (targetType === "simple") {
+        newMemory = new SimpleMemory(cfg.systemPrompt || undefined);
+        (newMemory as SimpleMemory).setMeta(cfg.provider, cfg.model);
+      } else if (targetType === "advanced") {
+        newMemory = new AdvancedMemory({ driver, model: activeModel, systemPrompt: cfg.systemPrompt || undefined });
+      } else if (targetType === "fragmentation") {
+        newMemory = new FragmentationMemory({ systemPrompt: cfg.systemPrompt || undefined });
+      } else {
+        newMemory = await buildMemory(cfg, driver); // VirtualMemory
+      }
+      
+      // Transfer messages to new memory
+      for (const msg of currentMessages) {
+        newMemory.add(msg);
+      }
+      
+      memory = newMemory;
+    };
+
     // Shared marker handler — used by both streaming parser and tool-arg scanner
     const handleMarker = (marker: { name: string; arg: string }) => {
       if (marker.name === "model-change") {
@@ -911,6 +945,9 @@ async function main() {
           emitStateVector({ [marker.name]: val }, cfg.outputFormat);
           Logger.info(`Stream marker: ${marker.name}(${val}) → visage`);
         }
+      } else if (marker.name === "memory" && marker.arg) {
+        // Memory hot-swap
+        void swapMemory(marker.arg);
       } else {
         Logger.info(`Stream marker: ${marker.name}('${marker.arg}')`);
       }
